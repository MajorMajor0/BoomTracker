<Window x:Class="BoomTracker.MainWindow"
		x:Name="Main_Window"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:local="clr-namespace:BoomTracker"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		Title="MainWindow"
		Width="500"
		Height="450"
		mc:Ignorable="d"
		Closing="MainWindow_Closing">
	<Window.DataContext>
		<local:MainWindowViewModel />
	</Window.DataContext>
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="130" />
		</Grid.RowDefinitions>

		<Image x:Name="MainImage"
			   Source="{Binding MainImage}" />

		<StackPanel Orientation="Horizontal"
					Grid.Row="1"
					Margin="5,5,5,10">
			<StackPanel.Resources>
				<Style x:Key="ControlButtonStyle"
					   TargetType="Button"
					   BasedOn="{StaticResource CButtonStyle}">
					<Setter Property="Width"
							Value="70" />
					<Setter Property="Height"
							Value="20" />
					<Setter Property="Margin"
							Value="5" />
					<Setter Property="VerticalAlignment"
							Value="Bottom" />
				</Style>

			</StackPanel.Resources>

			<StackPanel Width="200"
						VerticalAlignment="Bottom">
				<TextBlock Text="Select video source" />
				<ComboBox x:Name="ImageSourceComboBox"
						  DisplayMemberPath="Name"
						  ItemsSource="{Binding VideoDevices}"
						  SelectedItem="{Binding CurrentDevice}" />
				<StackPanel Orientation="Horizontal"
							Margin="0,15,0,0">
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.RectX, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.RectY, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.RectWidth, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.RectHeight, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.Threshold, UpdateSourceTrigger=PropertyChanged}" />
				</StackPanel>
				<StackPanel Orientation="Horizontal">
					<TextBlock Width="30"
							   Margin="2"
							   Text="X"
							   TextAlignment="Center" />
					<TextBlock Width="30"
							   Margin="2"
							   Text="Y"
							   TextAlignment="Center" />
					<TextBlock Width="30"
							   Margin="2"
							   TextAlignment="Center"
							   Text="W" />
					<TextBlock Width="30"
							   Margin="2"
							   TextAlignment="Center"
							   Text="H" />
					<TextBlock Width="30"
							   Margin="2"
							   TextAlignment="Center"
							   Text="Thr" />
				</StackPanel>

				<StackPanel Orientation="Horizontal">
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.Rect2X, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.Rect2Y, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.Rect2Width, UpdateSourceTrigger=PropertyChanged}" />
					<TextBox Width="30"
							 Margin="2"
							 Text="{Binding ElementName=Main_Window, Path=DataContext.Rect2Height, UpdateSourceTrigger=PropertyChanged}" />
				</StackPanel>
			</StackPanel>
			<StackPanel>
				<StackPanel Orientation="Horizontal">
					<Image x:Name="SliceImage"
						   Width="30"
						   Height="30"
						   Source="{Binding SliceImage}" />
					<TextBlock Text="{Binding Ones, FallbackValue=0}" />
				</StackPanel>


				<StackPanel Orientation="Horizontal">
					<Button Style="{StaticResource ControlButtonStyle}"
							Command="{Binding StartCommand}" />

					<Button Style="{StaticResource ControlButtonStyle}"
							Command="{Binding StopCommand}" />

					<Button Style="{StaticResource ControlButtonStyle}"
							Command="{Binding ImageCommand}" />
				</StackPanel>
			</StackPanel>


		</StackPanel>



	</Grid>
</Window>
